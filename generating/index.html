
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="IBM watsonx Code Assistant for Red Hat Ansible Lightspeed - Generative AI Training">
      
      
        <meta name="author" content="Christopher Bienko (cdbienko@us.ibm.com)">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.1">
    
    
      
        <title>Generating Code - IBM watsonx Code Assistant for Red Hat Ansible Lightspeed - Generative AI Training</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
   <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#generating-code-with-ibm-watsonx-code-assistant-for-red-hat-ansible-lightspeed" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="IBM watsonx Code Assistant for Red Hat Ansible Lightspeed - Generative AI Training" class="md-header__button md-logo" aria-label="IBM watsonx Code Assistant for Red Hat Ansible Lightspeed - Generative AI Training" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IBM watsonx Code Assistant for Red Hat Ansible Lightspeed - Generative AI Training
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Generating Code
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="IBM watsonx Code Assistant for Red Hat Ansible Lightspeed - Generative AI Training" class="md-nav__button md-logo" aria-label="IBM watsonx Code Assistant for Red Hat Ansible Lightspeed - Generative AI Training" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    IBM watsonx Code Assistant for Red Hat Ansible Lightspeed - Generative AI Training
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../setup/" class="md-nav__link">
        Setup and Troubleshooting
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Generating Code
      </a>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../source-matching-post-processing/" class="md-nav__link">
        Content Source Matching and Post-Processing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../customizing/" class="md-nav__link">
        Task Description Tuning and Model Customization
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="generating-code-with-ibm-watsonx-code-assistant-for-red-hat-ansible-lightspeed">Generating Code with IBM watsonx Code Assistant for Red Hat Ansible Lightspeed</h1>
<h1 id="_1"></h1>
<p>An <strong>Ansible Task</strong> is a statement in Ansible's automation script (the YAML-based Playbooks you will be working with) that declares a single action to be executed. This might be installing a package, copying a file, or shutting down a service on a remote machine. Each <em>Task</em> represents an idempotent operation (an action that can be repeated multiple times and deliver the same result every time) that aligns the remote managed node to the specified state. Idempotent operations also ensure consistency across multiple executions, guaranteeing the same steps are taken on each execution of the task.</p>
<p>At the time of publication, <em>IBM watsonx Code Assistant for Red Hat Ansible Lightspeed</em> (<strong>WCA</strong>) will only generate code for <strong>Ansible Tasks</strong>. This includes both <em>single task</em> and <em>multi-task</em> code generation. In future releases, it will be capable of generating many other components of Ansible Playbooks.</p>
<p>Once you have learned the fundamentals of generating Task code blocks, you'll be ready to shape and tailor the AI-generated code recommendations using WCA's model tuning capabilities.</p>
<hr />
<p><a class="glightbox" href="../_attachments/lightspeed.gif" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../_attachments/lightspeed.gif" /></a></p>
<hr />
<h1 id="_2"></h1>
<h1 id="generating-code-for-single-task-ansible-operations">Generating code for single task Ansible operations</h1>
<p>The process of creating AI-generated <strong>code recommendations</strong> is as simple as modifying the natural language (plain English) Task descriptions of an action that is to be executed, which always start with <code>- name:</code> and are followed by some description of the task to be performed. Ansible Tasks are often preceded with some <code>#</code> comments or documentation. After the natural language description of the automation Task has been set by the user, WCA handles the rest.</p>
<p>WCA is also capable of generating multiple Ansible Tasks from more complex natural language descriptions— what is referred to as <strong>multi-task</strong> code generation —which you will experiment with later in this module. However, to get started, let's begin with the basics of generating code for <strong>single task</strong> use cases.</p>
<hr />
<ol>
<li>
<p>Begin by opening the <code>install_cockpit_single-task.yml</code> Playbook from the list of assets in the Explorer browser.</p>
<ul>
<li>Click the <strong>Explorer</strong> tab from the left-hand interface<sup>[A]</sup></li>
<li>Drill down into the <code>Install and configure Cockpit using Ansible</code> subdirectory<sup>[B]</sup></li>
<li>Double-click the <code>install_cockpit_single-task.yml</code> Playbook</li>
<li>A replica of the Playbook code is also included below in the documentation</li>
</ul>
<p><br/></p>
<div class="admonition warning inline">
<p>The red highlighting within the editor reminds users that the <code>tasks:</code> section contains no valid <code>-name:</code> task definitions. This is part of WCA's code validation process which runs automatically and alerts users to syntax errors in their code. You can safely ignore these warnings for now, as you will be un-commenting and generating valid <code>-name:</code> task definitions in the following steps.</p>
</div>
<p><a class="glightbox" href="../_attachments/Generating-1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" loading="lazy" src="../_attachments/Generating-1.png" width="400" /></a></p>
</li>
</ol>
<hr />
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">~/Documents/ansible-wca-demo-kit/install and configure Cockpit using Ansible/install_cockpit_single-task.yml</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install and configure Cockpit</span><span class="w"></span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rhel</span><span class="w"></span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">  </span><span class="nt">become</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">  </span><span class="c1"># module_defaults:</span><span class="w"></span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="w">  </span><span class="c1">#   ansible.builtin.service:</span><span class="w"></span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">  </span><span class="c1">#     enabled: true</span><span class="w"></span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">  </span><span class="c1">#     state: started</span><span class="w"></span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">        </span><span class="c1"># TASK 1</span><span class="w"></span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">        </span><span class="c1"># # 1a. Uncomment task description below and generate a task suggestion.</span><span class="w"></span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="w">        </span><span class="c1"># #     Note - The suggestion included Ansible best practices by using Fully Qualified Collection name.</span><span class="w"></span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="w">    </span><span class="c1"># - name: Install cockpit package</span><span class="w"></span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="w">        </span><span class="c1"># TASK 2</span><span class="w"></span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="w">        </span><span class="c1"># # 2a. Uncomment task description below and generate a task suggestion.</span><span class="w"></span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="w">        </span><span class="c1"># #     Note - Ansible Lightspeed used &quot;ansible.builtin.template&quot; module based on the &quot;.j2&quot; file extension.</span><span class="w"></span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="w">        </span><span class="c1"># #     Note - The suggestion set the file permissions (&quot;0644&quot;), owner, and group based on Ansible best practices.</span><span class="w"></span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="w">    </span><span class="c1"># - name: Copy cockpit.conf.j2 to /etc/cockpit</span><span class="w"></span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="w">        </span><span class="c1"># TASK 3</span><span class="w"></span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="w">        </span><span class="c1"># # 3a. Uncomment task description below and generate a task suggestion.</span><span class="w"></span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="w">        </span><span class="c1"># #     Note - Ansible Lightspeed used the generic &quot;Start and enable service&quot; prompt</span><span class="w"></span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="w">        </span><span class="c1"># #            and full Playbook context to infer the recommendation should start the &quot;cockpit&quot; service.</span><span class="w"></span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="w">        </span><span class="c1"># # 3b. Uncomment the &quot;module_defaults&quot; section at the top of the Playbook.</span><span class="w"></span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="w">        </span><span class="c1"># # 3c. Clear current task suggestion and request updated suggestion.</span><span class="w"></span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="w">        </span><span class="c1"># #     Note - Ansible Lightspeed used the full Playbook context and evaluated the &quot;module_defaults&quot;</span><span class="w"></span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="w">        </span><span class="c1"># #            when generating a suggestion.</span><span class="w"></span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="w">        </span><span class="c1"># #            The updated suggestion no longer includes &quot;enabled:&quot; and &quot;state:&quot; arguments.</span><span class="w"></span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="w">    </span><span class="c1"># - name: Start and enable service</span><span class="w"></span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="w">        </span><span class="c1"># TASK 4</span><span class="w"></span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="w">        </span><span class="c1"># # 4a. Uncomment task description below and generate an Ansible Playbook task suggestion.</span><span class="w"></span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="w">        </span><span class="c1"># # 4b. Save the Playbook.</span><span class="w"></span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="w">    </span><span class="c1"># - name: Wait 15 seconds port 9090</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<hr />
<p>The <code>install_cockpit_single-task.yml</code> Playbook code above warrants some explanation before we move on with making AI-generated modifications to it:</p>
<ul>
<li>
<p><strong>Line 2</strong> essentially marks the beginning of the Playbook instructions, the purpose of which is to automate the process of installing and configuring <strong><a href="https://www.redhat.com/en/blog/automate-rhel-web-console-deployments-cockpit-and-certificate-rhel-system-roles" target="_blank">Cockpit</a></strong> for Red Hat Ansible.</p>
</li>
<li>
<p><strong>Lines 3-4</strong> define variables that will remain static throughout the remainder of the Playbook. These variables will be referenced by the AI-generated code suggestions at a later stage. This is a key capability of the offering and one which you will explore in much finer details later on in this module.</p>
</li>
<li>
<p><strong>Lines 6-9</strong> are variables which have been <em>commented out</em> and therefore are invisible to the execution of the Ansible script <strong>and</strong> not examined by WCA for context when generating code recommendations. You will experiment with how removing the <code>#</code> comment blocks impacts the recommendations of task block code. "Uncommenting" these lines of code will make them viable for execution and these lines will afterwards be considered as valid Playbook "context" for AI code generation.</p>
</li>
</ul>
<hr />
<ol start="2">
<li>
<p>Locate <code>TASK 1</code> on <strong>Line 15</strong> of the YAML file, which handles installation of <a href="https://www.redhat.com/en/blog/automate-rhel-web-console-deployments-cockpit-and-certificate-rhel-system-roles" target="_blank"><strong>Cockpit</strong></a> for Ansible. Cockpit is an interactive server administration interface that provides a graphical overview of statistics and configurations for a system or systems within a network. </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="w">    </span><span class="c1"># - name: Install cockpit package</span><span class="w"></span>
</code></pre></div>
<p>Pay attention to the indentation and characters used on <strong>Line 15</strong>, which in sequence from left to right are as follows:</p>
<ul>
<li>begins with a <span class="keys"><kbd class="key-tab">Tab</kbd></span> indentation</li>
<li>a <code>#</code> character to "comment out" the line contents</li>
<li>a whitespace <span class="keys"><kbd class="key-space">Space</kbd></span> character</li>
<li><code>- name:</code> which signifies the start of a Task definition</li>
<li>and finally the natural language description of the Task</li>
</ul>
<div class="admonition note">
<p class="admonition-title">INDENTATION LEVELS AND WHITESPACE</p>
<p>Similarly to Python, Ansible and YAML-based Playbooks are very sensitive to whitespacing and indentation. Indentations (such as the <span class="keys"><kbd class="key-tab">Tab</kbd></span> in this example) denote different hierarchies and code nesting levels within the YAML structure.</p>
<p>You may use <span class="keys"><kbd class="key-space">Space</kbd></span> instead of <span class="keys"><kbd class="key-tab">Tab</kbd></span> if you prefer, but be sure to <strong>use indentations consistently</strong>: choose to use either <span class="keys"><kbd class="key-tab">Tab</kbd></span> or <span class="keys"><kbd class="key-space">Space</kbd></span> for indenting lines of code, and do not interchange between the two.</p>
</div>
</li>
</ol>
<hr />
<ol start="3">
<li>
<p>To generate code for <code>TASK 1</code> using WCA, first <strong>uncomment</strong> the line of code (remove <code>#</code> characters from the start of a line).</p>
<ul>
<li>Highlight the line(s) of code you wish to uncomment and then press <span class="keys"><kbd class="key-command">Cmd</kbd><span>+</span><kbd class="key-question">?</kbd></span> for macOS or <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-question">?</kbd></span> for Windows</li>
<li>You can repeat those keystrokes with the line(s) selected to toggle between commenting or uncommenting lines of code</li>
<li>
<p><em>Tip:</em> commented out lines of code in VS Code will appear as green text</p>
<p><br/></p>
<p>Afterwards, <strong>Line 15</strong> should look like the following — beginning with a single <span class="keys"><kbd class="key-tab">Tab</kbd></span>:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install cockpit package</span><span class="w"></span>
</code></pre></div>
</li>
</ol>
<hr />
<ol start="4">
<li>
<p>Now you are ready to begin generating code. Place your cursor on <strong>Line 15</strong> and hit <span class="keys"><kbd class="key-enter">Enter</kbd></span></p>
<ul>
<li>Wait for WCA to engage and generate the suggested (in <em>grey, italicized text</em>) code block for executing the task</li>
<li>This temporary code suggestion is entirely generated by AI</li>
<li>As a user, you have the option to either:<ol>
<li><strong>Accept</strong> the code recommendation as-given by pressing <span class="keys"><kbd class="key-tab">Tab</kbd></span></li>
<li><strong>Modify</strong> the recommended code by highlighting and replacing the italicized text</li>
</ol>
</li>
</ul>
<details class="quote">
<summary>ANSIBLE LIGHTSPEED IS MISSING OR CODE RECOMMENDATIONS ARE NOT GENERATING</summary>
<p>Ansible Lightspeed and WCA will only generate code recommendations for <em>Ansible Playbooks</em> and <em>YAML</em> files. VS Code will typically auto-detect the programming language of the document you're working with, but on occassion you may need to manually specify the language. Even if working with a YAML file, you'll still need to specify the language mode as <code>Ansible</code> for the Lightspeed plugin to engage.</p>
<p>To set the language mode correctly:</p>
<ul>
<li>
<p>In the bottom-right corner of the VS Code interface, hover over the <strong>Select Language Mode</strong> toggle<sup>[A]</sup></p>
</li>
<li>
<p>A console will appear at the top of VS Code with a drop-down list of options<sup>[B]</sup></p>
</li>
<li>
<p>Click <code>Ansible</code> from the suggested languages, or enter the text yourself and hit <span class="keys"><kbd class="key-enter">Enter</kbd></span></p>
</li>
<li>
<p>Confirm that the Select Language Mode toggle in the bottom-right corner displays <code>Ansible</code></p>
</li>
</ul>
<p><br/>
<a class="glightbox" href="../_attachments/troubleshooting-2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" loading="lazy" src="../_attachments/troubleshooting-2.png" width="600" /></a></p>
<p><a class="glightbox" href="../_attachments/troubleshooting-3.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" loading="lazy" src="../_attachments/troubleshooting-3.png" width="600" /></a></p>
</details>
</li>
</ol>
<hr />
<ol start="5">
<li>
<p>Hit <span class="keys"><kbd class="key-tab">Tab</kbd></span> to accept the suggested code and then compare with the <code>SOLUTION</code> tab below.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">TEMPLATE</label><label for="__tabbed_2_2">SOLUTION</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># TASK 1</span><span class="w"></span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install cockpit package</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># TASK 1</span><span class="w"></span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install cockpit package</span><span class="w"></span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="nt">ansible.builtin.package</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cockpit</span><span class="w"></span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>As part of the plain-text description of the Task, WCA was asked to include the <code>cockpit</code> Role, part of the <a href="https://access.redhat.com/articles/3050101" target="_blank">Red Hat Enterprise Linux System Roles</a> Certified Content Collection. The AI-generated code suggestion invoked a <a href="https://docs.ansible.com/ansible/latest/collections_guide/collections_using_playbooks.html" target="_blank">Fully Qualified Collection Name</a> (<strong>FQCN</strong>) - <code>ansible.builtin.package</code></p>
<p>Making use of FQCNs where possible is a recommended best practice and is a prime example of the many ways in which the offering infuses post-processing capabilities within the AI-generated code produced by WCA. </p>
</li>
</ol>
<hr />
<ol start="6">
<li>
<p>Additional examples of infusing best-practices into AI-generated code recommendations can be found in  <code>TASK 2</code> (<strong>Line 21</strong> of the unmodified template or <strong>Line 25</strong> after <em>Step 5</em>):</p>
<ul>
<li>Uncomment <code>- name: Copy cockpit.conf.j2 to /etc/cockpit</code></li>
<li>Hit <span class="keys"><kbd class="key-enter">Enter</kbd></span> to generate the task code recommendation and accept the AI-suggested code (without modifications) by pressing <span class="keys"><kbd class="key-tab">Tab</kbd></span></li>
<li>Compare your results with the <code>SOLUTION</code> tab below</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">TEMPLATE</label><label for="__tabbed_3_2">SOLUTION</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># TASK 2</span><span class="w"></span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Copy cockpit.conf.j2 to /etc/cockpit</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># TASK 2</span><span class="w"></span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Copy cockpit.conf.j2 to /etc/cockpit</span><span class="w"></span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="nt">ansible.builtin.template</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">    </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cockpit.conf.j2</span><span class="w"></span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">    </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/cockpit/cockpit.conf</span><span class="w"></span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">    </span><span class="nt">owner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span><span class="w"></span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">    </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span><span class="w"></span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">    </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;0644&#39;</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>The AI-generated code recommendation will copy <a href="https://github.com/craig-br/demos/blob/main/blogs/lightspeed_tech_preview_jun2023/files/cockpit.conf" target="_blank"><code>cockpit.conf</code></a> to the target host.</p>
<p>Take note of the fact that the recommendation included the <code>mode:</code> argument and set the Linux file permissions to <code>0644</code>, neither of which were things explicitly requested in the Task <code>-name</code> description, but are both additions which adhere to best practices around defining Ansible automaton tasks. Setting a file permission to <code>0644</code> specifies read and write permissions for User and Group levels within the Linux OS, and provides only read permissions to all others.</p>
<p>These additional recommendations stem from a robust example of setting file permissions for the <a href="https://docs.ansible.com/ansible/latest/collections/ansible/builtin/copy_module.html" target="_blank"><code>ansible.builtin.copy</code></a> module, a recommended best practice from the Ansible Galaxy and Red Hat communities that WCA included in the AI-generated code as well.</p>
</li>
</ol>
<hr />
<h1 id="_3"></h1>
<h1 id="generating-code-for-multi-task-ansible-operations">Generating code for multi-task Ansible operations</h1>
<p>Up to this point, we've kept a narrow aperture on AI-generated recommendations for single tasks — examining and experimenting with generating Ansible code task by task, one at a time. However, a powerful WCA feature is the ability to combine multiple task descriptions into a single natural language prompt; in turn, WCA is able to parse that instruction, decompose the instruction into discrete Ansible Task parts, and return a complete code recommendation for achieving the author's intended goal.</p>
<p>Synatically, multiple tasks are combined into a single natural language expression through the use of <strong>ampersand</strong> (<code>%</code>) characters. Simply write out all the automation task descriptions on a single line, separating each description with a <code>%</code> character. The line must also <em>begin</em> with a <code>#</code> character (for reasons that will be explained shortly), giving the appearance of a commented-out line.</p>
<hr />
<ol start="7">
<li>
<p>To illustrate, let's look at a multi-task Ansible Playbook: <code>install_cockpit_multi-task.yml</code></p>
<ul>
<li>
<p>The contents of this Playbook should look familiar to you already: it is essentially the same Playbook examined in <em>Steps 1-6</em> (<code>install_cockpit_single-task.yml</code>), re-written in an equivalent multi-task expression</p>
</li>
<li>
<p>Each of the Task descriptions from the previous Playbook have been consolidated into a single description on <strong>Line 12</strong>, separated by <code>%</code> characters</p>
</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">~/Documents/ansible-wca-demo-kit/install and configure Cockpit using Ansible/install_cockpit_multi-task.yml</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-7-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-7-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-7-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-7-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-7-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-7-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-7-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-7-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-7-10">10</a></span>
<span class="normal"><a href="#__codelineno-7-11">11</a></span>
<span class="normal"><a href="#__codelineno-7-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install and configure Cockpit</span><span class="w"></span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rhel</span><span class="w"></span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="nt">become</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="nt">module_defaults</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="w">    </span><span class="nt">ansible.builtin.service</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">started</span><span class="w"></span>
<a id="__codelineno-7-10" name="__codelineno-7-10"></a>
<a id="__codelineno-7-11" name="__codelineno-7-11"></a><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-7-12" name="__codelineno-7-12"></a><span class="w">    </span><span class="c1"># Install cockpit package &amp; Copy cockpit.conf.j2 to /etc/cockpit &amp; Start and enable service &amp; Wait 15 seconds port 9090</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</li>
</ol>
<hr />
<ol start="8">
<li>
<p>There are two crucial distinctions between <em>single task</em> and <em>multi-task</em> code generation: formatting and execution.</p>
<ul>
<li><em>Formatting</em>: Notice that <strong>Line 12</strong> does not begin with <code>-name:</code>, as was the case with single task descriptions</li>
<li><em>Execution</em>: In order to generate AI code recommendations for multi-task descriptions, <strong>Line 12</strong> must <em>stay commented out</em> (the <code>#</code> needs to remain at the start of the line)</li>
</ul>
<p><br/></p>
<p>What is the rationale behind this? When WCA's generative AI capabilities parse <strong>Line 12</strong>, its output will include multiple <code>-name:</code> tasks, each containing potentially multiple lines of instructions, based on how many <code>%</code>-delineated task descriptions are included on the line.</p>
<p>Therefore, the way in which the code generation step is executed on <strong>Line 12</strong> is a consequence of the formatting decision. Execution of a code generation step on a commented-out (<code>#</code>) line containing <code>%</code> delineators is recognized by WCA as a unique case that will be acted upon as a multi-task statement.</p>
</li>
</ol>
<hr />
<ol start="9">
<li>
<p>Place your cursor at the end of <strong>Line 12</strong>, and without removing the <code>#</code> character, press <span class="keys"><kbd class="key-enter">Enter</kbd></span> to execute the code generation step. Be aware that generating code for multi-task descriptions will take longer compared to a single task.</p>
<p>Compare the <code>MULTI-TASK</code> solution tab with the <code>SINGLE TASK</code> solution (copied over from <em>Step 6</em>). How did the multi-task code generation fare compared to the single task approach?</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">MULTI-TASK</label><label for="__tabbed_5_2">SINGLE TASK</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span>
<span class="normal"><a href="#__codelineno-8-12">12</a></span>
<span class="normal"><a href="#__codelineno-8-13">13</a></span>
<span class="normal"><a href="#__codelineno-8-14">14</a></span>
<span class="normal"><a href="#__codelineno-8-15">15</a></span>
<span class="normal"><a href="#__codelineno-8-16">16</a></span>
<span class="normal"><a href="#__codelineno-8-17">17</a></span>
<span class="normal"><a href="#__codelineno-8-18">18</a></span>
<span class="normal"><a href="#__codelineno-8-19">19</a></span>
<span class="normal"><a href="#__codelineno-8-20">20</a></span>
<span class="normal"><a href="#__codelineno-8-21">21</a></span>
<span class="normal"><a href="#__codelineno-8-22">22</a></span>
<span class="normal"><a href="#__codelineno-8-23">23</a></span>
<span class="normal"><a href="#__codelineno-8-24">24</a></span>
<span class="normal"><a href="#__codelineno-8-25">25</a></span>
<span class="normal"><a href="#__codelineno-8-26">26</a></span>
<span class="normal"><a href="#__codelineno-8-27">27</a></span>
<span class="normal"><a href="#__codelineno-8-28">28</a></span>
<span class="normal"><a href="#__codelineno-8-29">29</a></span>
<span class="normal"><a href="#__codelineno-8-30">30</a></span>
<span class="normal"><a href="#__codelineno-8-31">31</a></span>
<span class="normal"><a href="#__codelineno-8-32">32</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install and configure Cockpit</span><span class="w"></span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rhel</span><span class="w"></span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="nt">become</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="nt">module_defaults</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">    </span><span class="nt">ansible.builtin.service</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">started</span><span class="w"></span>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a>
<a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install cockpit package</span><span class="w"></span>
<a id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="w">    </span><span class="nt">ansible.builtin.package</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cockpit</span><span class="w"></span>
<a id="__codelineno-8-15" name="__codelineno-8-15"></a><span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span><span class="w"></span>
<a id="__codelineno-8-16" name="__codelineno-8-16"></a>
<a id="__codelineno-8-17" name="__codelineno-8-17"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Copy cockpit.conf.j2 to /etc/cockpit</span><span class="w"></span>
<a id="__codelineno-8-18" name="__codelineno-8-18"></a><span class="w">    </span><span class="nt">ansible.builtin.template</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-8-19" name="__codelineno-8-19"></a><span class="w">        </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cockpit.conf.j2</span><span class="w"></span>
<a id="__codelineno-8-20" name="__codelineno-8-20"></a><span class="w">        </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/cockpit/cockpit.conf</span><span class="w"></span>
<a id="__codelineno-8-21" name="__codelineno-8-21"></a><span class="w">        </span><span class="nt">owner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span><span class="w"></span>
<a id="__codelineno-8-22" name="__codelineno-8-22"></a><span class="w">        </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span><span class="w"></span>
<a id="__codelineno-8-23" name="__codelineno-8-23"></a><span class="w">        </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;0644&#39;</span><span class="w"></span>
<a id="__codelineno-8-24" name="__codelineno-8-24"></a>
<a id="__codelineno-8-25" name="__codelineno-8-25"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Start and enable service</span><span class="w"></span>
<a id="__codelineno-8-26" name="__codelineno-8-26"></a><span class="w">    </span><span class="nt">ansible.builtin.service</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-8-27" name="__codelineno-8-27"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cockpit.socket</span><span class="w"></span>
<a id="__codelineno-8-28" name="__codelineno-8-28"></a>
<a id="__codelineno-8-29" name="__codelineno-8-29"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Wait 15 seconds port 9090</span><span class="w"></span>
<a id="__codelineno-8-30" name="__codelineno-8-30"></a><span class="w">    </span><span class="nt">ansible.builtin.wait_for</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-8-31" name="__codelineno-8-31"></a><span class="w">        </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9090</span><span class="w"></span>
<a id="__codelineno-8-32" name="__codelineno-8-32"></a><span class="w">        </span><span class="nt">delay</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span>
<span class="normal"><a href="#__codelineno-9-13">13</a></span>
<span class="normal"><a href="#__codelineno-9-14">14</a></span>
<span class="normal"><a href="#__codelineno-9-15">15</a></span>
<span class="normal"><a href="#__codelineno-9-16">16</a></span>
<span class="normal"><a href="#__codelineno-9-17">17</a></span>
<span class="normal"><a href="#__codelineno-9-18">18</a></span>
<span class="normal"><a href="#__codelineno-9-19">19</a></span>
<span class="normal"><a href="#__codelineno-9-20">20</a></span>
<span class="normal"><a href="#__codelineno-9-21">21</a></span>
<span class="normal"><a href="#__codelineno-9-22">22</a></span>
<span class="normal"><a href="#__codelineno-9-23">23</a></span>
<span class="normal"><a href="#__codelineno-9-24">24</a></span>
<span class="normal"><a href="#__codelineno-9-25">25</a></span>
<span class="normal"><a href="#__codelineno-9-26">26</a></span>
<span class="normal"><a href="#__codelineno-9-27">27</a></span>
<span class="normal"><a href="#__codelineno-9-28">28</a></span>
<span class="normal"><a href="#__codelineno-9-29">29</a></span>
<span class="normal"><a href="#__codelineno-9-30">30</a></span>
<span class="normal"><a href="#__codelineno-9-31">31</a></span>
<span class="normal"><a href="#__codelineno-9-32">32</a></span>
<span class="normal"><a href="#__codelineno-9-33">33</a></span>
<span class="normal"><a href="#__codelineno-9-34">34</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install and configure Cockpit</span><span class="w"></span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rhel</span><span class="w"></span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="nt">become</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="nt">module_defaults</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="w">    </span><span class="nt">ansible.builtin.service</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">started</span><span class="w"></span>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install cockpit package</span><span class="w"></span>
<a id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="w">    </span><span class="nt">ansible.builtin.package</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-9-14" name="__codelineno-9-14"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cockpit</span><span class="w"></span>
<a id="__codelineno-9-15" name="__codelineno-9-15"></a><span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span><span class="w"></span>
<a id="__codelineno-9-16" name="__codelineno-9-16"></a>
<a id="__codelineno-9-17" name="__codelineno-9-17"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Copy cockpit.conf.j2 to /etc/cockpit</span><span class="w"></span>
<a id="__codelineno-9-18" name="__codelineno-9-18"></a><span class="w">    </span><span class="nt">ansible.builtin.template</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-9-19" name="__codelineno-9-19"></a><span class="w">        </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cockpit.conf.j2</span><span class="w"></span>
<a id="__codelineno-9-20" name="__codelineno-9-20"></a><span class="w">        </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/cockpit/cockpit.conf</span><span class="w"></span>
<a id="__codelineno-9-21" name="__codelineno-9-21"></a><span class="w">        </span><span class="nt">owner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span><span class="w"></span>
<a id="__codelineno-9-22" name="__codelineno-9-22"></a><span class="w">        </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span><span class="w"></span>
<a id="__codelineno-9-23" name="__codelineno-9-23"></a><span class="w">        </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;0644&#39;</span><span class="w"></span>
<a id="__codelineno-9-24" name="__codelineno-9-24"></a>
<a id="__codelineno-9-25" name="__codelineno-9-25"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Start and enable service</span><span class="w"></span>
<a id="__codelineno-9-26" name="__codelineno-9-26"></a><span class="w">    </span><span class="nt">ansible.builtin.service</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-9-27" name="__codelineno-9-27"></a><span class="hll"><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cockpit</span><span class="w"></span>
</span><a id="__codelineno-9-28" name="__codelineno-9-28"></a><span class="hll"><span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">started</span><span class="w"></span>
</span><a id="__codelineno-9-29" name="__codelineno-9-29"></a><span class="hll"><span class="w">        </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
</span><a id="__codelineno-9-30" name="__codelineno-9-30"></a>
<a id="__codelineno-9-31" name="__codelineno-9-31"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Wait 15 seconds port 9090</span><span class="w"></span>
<a id="__codelineno-9-32" name="__codelineno-9-32"></a><span class="w">    </span><span class="nt">ansible.builtin.wait_for</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-9-33" name="__codelineno-9-33"></a><span class="w">        </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9090</span><span class="w"></span>
<a id="__codelineno-9-34" name="__codelineno-9-34"></a><span class="w">        </span><span class="nt">delay</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
</li>
</ol>
<hr />
<ol start="10">
<li>
<p>Comparing the two results, the only notable difference between the two approaches are <strong>Lines 27-29</strong> from the <code>SINGLE TASK</code> generative AI approach.</p>
<p>Both the <code>SINGLE TASK</code> and <code>MULTI-TASK</code> suggestions for that particular task <em>satisfy</em> the request made by the user. However, whether the single task or multi-task approach resulted in a better code suggestion is up to the judgement of the programmer. Nearly 90% of the remaining code was identical between the two approaches and was achieved in far fewer lines of code (and less typing) using the multi-task approach.</p>
<div class="admonition warning">
<p>The variability of generative AI suggestions is a fascinating topic and one that we will dive more deeply into with the module ahead.</p>
</div>
</li>
</ol>
<hr />
<ol start="11">
<li>
<p>Before moving on to other product features, experiment by creating a new Ansible Playbook in your workspace using the code template below. Suggestions will be given on how to perform the same automation task using single and multi-task generation approaches.</p>
<ul>
<li>
<p>Save the YAML file as <code>create_ec2_single_multi.yml</code></p>
</li>
<li>
<p>Copy the following code block to your clipboard using the <span class="keys"><kbd class="key-plus">+</kbd></span> icon in the top-right corner of the panel and paste into the newly created YAML file</p>
</li>
</ul>
<details class="quote">
<summary>HOW TO CREATE NEW <code>YAML</code> PLAYBOOKS</summary>
<p><strong>Note:</strong> You need to copy and paste the contents of the Playbook into a <strong>New File...</strong> within the <em>same</em> Lightspeed project directory that was used for the previous lab modules in order for the VS Code extension to engage.</p>
<p>To create a new YAML Playbook within a VS Code environment:</p>
<p><strong>a.</strong> Copy the contents of the Playbook to clipboard using the button in the top-right corner of the lab guide code block.</p>
<p><a class="glightbox" href="../_attachments/figure18.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" loading="lazy" src="../_attachments/figure18.png" width="400" /></a></p>
<p><strong>b.</strong> Return to your VS Code environment. In the top-left corner of the interface, with your Ansible Lightspeed folder selected, click the <strong>New File...</strong> button.</p>
<p><a class="glightbox" href="../_attachments/figure19.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" loading="lazy" src="../_attachments/figure19.png" width="400" /></a></p>
<p><strong>c.</strong> Name the file to a description of your choosing, ending with <code>.yml</code> as the filetype. Set it to <code>CustomPlaybook.yml</code>, for example. Save it to one of the directories in the <code>ansible-wca-demo-kit</code> folder.</p>
<p><strong>d.</strong> Paste the clipboard contents into the YAML file and follow along with the suggestions below.</p>
</details>
<details class="quote">
<summary>COPY AND PASTE CODE WITHIN THE VM</summary>
<p>Information "copied" to your local machine's clipboard cannot be "pasted" directly into the virtual machine (VM) environment or VS Code. If you wish to copy and paste instructions directly from the lab documentation, it is recommended that you open the GitHub instructions <strong>inside</strong> the VM's web browser (Firefox). This will allow you to copy instructions to the VM's clipboard and paste instructions inside the VS Code editor.</p>
</details>
<details class="quote">
<summary>ANSIBLE LIGHTSPEED IS MISSING OR CODE RECOMMENDATIONS ARE NOT GENERATING</summary>
<p>Ansible Lightspeed and WCA will only generate code recommendations for <em>Ansible Playbooks</em> and <em>YAML</em> files. VS Code will typically auto-detect the programming language of the document you're working with, but on occassion you may need to manually specify the language. Even if working with a YAML file, you'll still need to specify the language mode as <code>Ansible</code> for the Lightspeed plugin to engage.</p>
<p>To set the language mode correctly:</p>
<ul>
<li>
<p>In the bottom-right corner of the VS Code interface, hover over the <strong>Select Language Mode</strong> toggle<sup>[A]</sup></p>
</li>
<li>
<p>A console will appear at the top of VS Code with a drop-down list of options<sup>[B]</sup></p>
</li>
<li>
<p>Click <code>Ansible</code> from the suggested languages, or enter the text yourself and hit <span class="keys"><kbd class="key-enter">Enter</kbd></span></p>
</li>
<li>
<p>Confirm that the Select Language Mode toggle in the bottom-right corner displays <code>Ansible</code></p>
</li>
</ul>
<p><br/>
<a class="glightbox" href="../_attachments/troubleshooting-2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" loading="lazy" src="../_attachments/troubleshooting-2.png" width="600" /></a></p>
<p><a class="glightbox" href="../_attachments/troubleshooting-3.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" loading="lazy" src="../_attachments/troubleshooting-3.png" width="600" /></a></p>
</details>
<div class="tabbed-set tabbed-alternate" data-tabs="6:1"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">~/Documents/ansible-wca-demo-kit/create_ec2_single_multi.yml</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span>
<span class="normal"><a href="#__codelineno-10-3">3</a></span>
<span class="normal"><a href="#__codelineno-10-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Provision an EC2 instance</span><span class="w"></span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span><span class="w"></span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</li>
</ol>
<hr />
<ol start="12">
<li>
<p>First, configure the Playbook for single task generation by adding the following code snippet into <strong>Line 5</strong> (remembering to properly indent with <span class="keys"><kbd class="key-tab">Tab</kbd></span> or <span class="keys"><kbd class="key-space">Space</kbd></span> characters):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">create vpc named demo</span><span class="w"></span>
</code></pre></div>
</li>
</ol>
<hr />
<ol start="13">
<li>
<p>Your workspace Playbook should look identical to the <code>TEMPLATE</code> tab below. Place your cursor at the end of the newly-created <strong>Line 5</strong> and hit <span class="keys"><kbd class="key-enter">Enter</kbd></span> to execute single task code generation. Compare your results to the <code>SOLUTION</code> tab. Record your results to a notepad so that you can compare the results later.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">TEMPLATE</label><label for="__tabbed_7_2">SOLUTION</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span>
<span class="normal"><a href="#__codelineno-12-3">3</a></span>
<span class="normal"><a href="#__codelineno-12-4">4</a></span>
<span class="normal"><a href="#__codelineno-12-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Provision an EC2 instance</span><span class="w"></span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span><span class="w"></span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">create vpc named demo</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Provision an EC2 instance</span><span class="w"></span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span><span class="w"></span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">create vpc named demo</span><span class="w"></span>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="w">    </span><span class="nt">amazon.aws.ec2_vpc_net</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demo</span><span class="w"></span>
<a id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="w">        </span><span class="nt">cidr_block</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0.0.80/16</span><span class="w"></span>
<a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="w">        </span><span class="nt">tags</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="w">        </span><span class="nt">Name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demo</span><span class="w"></span>
<a id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="w">        </span><span class="nt">tenancy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span><span class="w"></span>
<a id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="w">    </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vpc</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
</li>
</ol>
<hr />
<ol start="14">
<li>
<p>Now it's time to re-write the Playbook for multi-task code generation. The beauty of natural language statements is that your approach can be as terse or verbose as you want. The more verbose and descriptive, the more <em>prescriptive</em> you can be in terms of influencing the AI-generated code recommendations from WCA.</p>
<p>The topic of <em>"prompt tuning"</em> will be explored in much greater detail in the <a href="https://ibm.github.io/wca-generative-ai-training/customizing/" target="_blank">Task Description Tuning and Model Customization</a> module. But for now: </p>
<ul>
<li>
<p><strong>Replace</strong> the code inside <code>create_ec2_single_multi.yml</code> with the <code>TEMPLATE</code> code block (below)</p>
</li>
<li>
<p>Place your cursor at the end of <strong>Line 5</strong> (remember not to remove the <code>#</code> character) and hit <span class="keys"><kbd class="key-enter">Enter</kbd></span>, then accept the recommendation with <span class="keys"><kbd class="key-tab">Tab</kbd></span></p>
</li>
<li>
<p>Compare your results to the <code>SOLUTION</code> tab and to the result from <em>Step 13</em></p>
</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">TEMPLATE</label><label for="__tabbed_8_2">SOLUTION</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span>
<span class="normal"><a href="#__codelineno-14-3">3</a></span>
<span class="normal"><a href="#__codelineno-14-4">4</a></span>
<span class="normal"><a href="#__codelineno-14-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Provision an EC2 instance</span><span class="w"></span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span><span class="w"></span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="w">    </span><span class="c1"># create vpc named demo &amp; create security group for demo vpc and allow ssh and http &amp; create internet gateway named demogateway for demo vpc &amp; create subnet named demosubnet in demo vpc &amp; create route table for subnet demosubnet and gateway demogateway &amp; create t2.small ec2 instance in subnet demosubnet</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-15-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-15-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-15-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-15-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-15-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-15-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-15-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-15-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-15-10">10</a></span>
<span class="normal"><a href="#__codelineno-15-11">11</a></span>
<span class="normal"><a href="#__codelineno-15-12">12</a></span>
<span class="normal"><a href="#__codelineno-15-13">13</a></span>
<span class="normal"><a href="#__codelineno-15-14">14</a></span>
<span class="normal"><a href="#__codelineno-15-15">15</a></span>
<span class="normal"><a href="#__codelineno-15-16">16</a></span>
<span class="normal"><a href="#__codelineno-15-17">17</a></span>
<span class="normal"><a href="#__codelineno-15-18">18</a></span>
<span class="normal"><a href="#__codelineno-15-19">19</a></span>
<span class="normal"><a href="#__codelineno-15-20">20</a></span>
<span class="normal"><a href="#__codelineno-15-21">21</a></span>
<span class="normal"><a href="#__codelineno-15-22">22</a></span>
<span class="normal"><a href="#__codelineno-15-23">23</a></span>
<span class="normal"><a href="#__codelineno-15-24">24</a></span>
<span class="normal"><a href="#__codelineno-15-25">25</a></span>
<span class="normal"><a href="#__codelineno-15-26">26</a></span>
<span class="normal"><a href="#__codelineno-15-27">27</a></span>
<span class="normal"><a href="#__codelineno-15-28">28</a></span>
<span class="normal"><a href="#__codelineno-15-29">29</a></span>
<span class="normal"><a href="#__codelineno-15-30">30</a></span>
<span class="normal"><a href="#__codelineno-15-31">31</a></span>
<span class="normal"><a href="#__codelineno-15-32">32</a></span>
<span class="normal"><a href="#__codelineno-15-33">33</a></span>
<span class="normal"><a href="#__codelineno-15-34">34</a></span>
<span class="normal"><a href="#__codelineno-15-35">35</a></span>
<span class="normal"><a href="#__codelineno-15-36">36</a></span>
<span class="normal"><a href="#__codelineno-15-37">37</a></span>
<span class="normal"><a href="#__codelineno-15-38">38</a></span>
<span class="normal"><a href="#__codelineno-15-39">39</a></span>
<span class="normal"><a href="#__codelineno-15-40">40</a></span>
<span class="normal"><a href="#__codelineno-15-41">41</a></span>
<span class="normal"><a href="#__codelineno-15-42">42</a></span>
<span class="normal"><a href="#__codelineno-15-43">43</a></span>
<span class="normal"><a href="#__codelineno-15-44">44</a></span>
<span class="normal"><a href="#__codelineno-15-45">45</a></span>
<span class="normal"><a href="#__codelineno-15-46">46</a></span>
<span class="normal"><a href="#__codelineno-15-47">47</a></span>
<span class="normal"><a href="#__codelineno-15-48">48</a></span>
<span class="normal"><a href="#__codelineno-15-49">49</a></span>
<span class="normal"><a href="#__codelineno-15-50">50</a></span>
<span class="normal"><a href="#__codelineno-15-51">51</a></span>
<span class="normal"><a href="#__codelineno-15-52">52</a></span>
<span class="normal"><a href="#__codelineno-15-53">53</a></span>
<span class="normal"><a href="#__codelineno-15-54">54</a></span>
<span class="normal"><a href="#__codelineno-15-55">55</a></span>
<span class="normal"><a href="#__codelineno-15-56">56</a></span>
<span class="normal"><a href="#__codelineno-15-57">57</a></span>
<span class="normal"><a href="#__codelineno-15-58">58</a></span>
<span class="normal"><a href="#__codelineno-15-59">59</a></span>
<span class="normal"><a href="#__codelineno-15-60">60</a></span>
<span class="normal"><a href="#__codelineno-15-61">61</a></span>
<span class="normal"><a href="#__codelineno-15-62">62</a></span>
<span class="normal"><a href="#__codelineno-15-63">63</a></span>
<span class="normal"><a href="#__codelineno-15-64">64</a></span>
<span class="normal"><a href="#__codelineno-15-65">65</a></span>
<span class="normal"><a href="#__codelineno-15-66">66</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Provision an EC2 instance</span><span class="w"></span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span><span class="w"></span>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="w">    </span><span class="c1"># create vpc named demo &amp; create security group for demo vpc and allow ssh and http &amp; create internet gateway named demogateway for demo vpc &amp; create subnet named demosubnet in demo vpc &amp; create route table for subnet demosubnet and gateway demogateway &amp; create t2.small ec2 instance in subnet demosubnet</span><span class="w"></span>
<a id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create vpc named demo</span><span class="w"></span>
<a id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="w">    </span><span class="nt">amazon.aws.ec2_vpc_net</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demo</span><span class="w"></span>
<a id="__codelineno-15-9" name="__codelineno-15-9"></a><span class="w">        </span><span class="nt">cidr_block</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0.0.80/16</span><span class="w"></span>
<a id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="w">        </span><span class="nt">tags</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-15-11" name="__codelineno-15-11"></a><span class="w">        </span><span class="nt">Name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demo</span><span class="w"></span>
<a id="__codelineno-15-12" name="__codelineno-15-12"></a><span class="w">        </span><span class="nt">tenancy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span><span class="w"></span>
<a id="__codelineno-15-13" name="__codelineno-15-13"></a><span class="w">    </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vpc</span><span class="w"></span>
<a id="__codelineno-15-14" name="__codelineno-15-14"></a>
<a id="__codelineno-15-15" name="__codelineno-15-15"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create security group for demo vpc and allow ssh and http</span><span class="w"></span>
<a id="__codelineno-15-16" name="__codelineno-15-16"></a><span class="w">    </span><span class="nt">amazon.aws.ec2_security_group</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-15-17" name="__codelineno-15-17"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demo</span><span class="w"></span>
<a id="__codelineno-15-18" name="__codelineno-15-18"></a><span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demo security group</span><span class="w"></span>
<a id="__codelineno-15-19" name="__codelineno-15-19"></a><span class="w">        </span><span class="nt">vpc_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{</span><span class="nv"> </span><span class="s">vpc.vpc.id</span><span class="nv"> </span><span class="s">}&quot;</span><span class="w"></span>
<a id="__codelineno-15-20" name="__codelineno-15-20"></a><span class="w">        </span><span class="nt">rules</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-15-21" name="__codelineno-15-21"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">proto</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span><span class="w"></span>
<a id="__codelineno-15-22" name="__codelineno-15-22"></a><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">from_port</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">22</span><span class="w"></span>
<a id="__codelineno-15-23" name="__codelineno-15-23"></a><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">to_port</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">22</span><span class="w"></span>
<a id="__codelineno-15-24" name="__codelineno-15-24"></a><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">cidr_ip</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0/0</span><span class="w"></span>
<a id="__codelineno-15-25" name="__codelineno-15-25"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">proto</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span><span class="w"></span>
<a id="__codelineno-15-26" name="__codelineno-15-26"></a><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">from_port</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span><span class="w"></span>
<a id="__codelineno-15-27" name="__codelineno-15-27"></a><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">to_port</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span><span class="w"></span>
<a id="__codelineno-15-28" name="__codelineno-15-28"></a><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">cidr_ip</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0/0</span><span class="w"></span>
<a id="__codelineno-15-29" name="__codelineno-15-29"></a><span class="w">    </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sg</span><span class="w"></span>
<a id="__codelineno-15-30" name="__codelineno-15-30"></a>
<a id="__codelineno-15-31" name="__codelineno-15-31"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create internet gateway named demogateway for demo vpc</span><span class="w"></span>
<a id="__codelineno-15-32" name="__codelineno-15-32"></a><span class="w">    </span><span class="nt">amazon.aws.ec2_vpc_igw</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-15-33" name="__codelineno-15-33"></a><span class="w">        </span><span class="nt">vpc_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{</span><span class="nv"> </span><span class="s">vpc.vpc.id</span><span class="nv"> </span><span class="s">}&quot;</span><span class="w"></span>
<a id="__codelineno-15-34" name="__codelineno-15-34"></a><span class="w">        </span><span class="nt">tags</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-15-35" name="__codelineno-15-35"></a><span class="w">        </span><span class="nt">Name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demogateway</span><span class="w"></span>
<a id="__codelineno-15-36" name="__codelineno-15-36"></a><span class="w">    </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">igw</span><span class="w"></span>
<a id="__codelineno-15-37" name="__codelineno-15-37"></a>
<a id="__codelineno-15-38" name="__codelineno-15-38"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create subnet named demosubnet in demo vpc</span><span class="w"></span>
<a id="__codelineno-15-39" name="__codelineno-15-39"></a><span class="w">    </span><span class="nt">amazon.aws.ec2_vpc_subnet</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-15-40" name="__codelineno-15-40"></a><span class="w">        </span><span class="nt">cidr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0.0.80/24</span><span class="w"></span>
<a id="__codelineno-15-41" name="__codelineno-15-41"></a><span class="w">        </span><span class="nt">vpc_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{</span><span class="nv"> </span><span class="s">vpc.vpc.id</span><span class="nv"> </span><span class="s">}&quot;</span><span class="w"></span>
<a id="__codelineno-15-42" name="__codelineno-15-42"></a><span class="w">        </span><span class="nt">tags</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-15-43" name="__codelineno-15-43"></a><span class="w">        </span><span class="nt">Name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demosubnet</span><span class="w"></span>
<a id="__codelineno-15-44" name="__codelineno-15-44"></a><span class="w">    </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">subnet</span><span class="w"></span>
<a id="__codelineno-15-45" name="__codelineno-15-45"></a>
<a id="__codelineno-15-46" name="__codelineno-15-46"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create route table for subnet demosubnet and gateway demogateway</span><span class="w"></span>
<a id="__codelineno-15-47" name="__codelineno-15-47"></a><span class="w">    </span><span class="nt">amazon.aws.ec2_vpc_route_table</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-15-48" name="__codelineno-15-48"></a><span class="w">        </span><span class="nt">vpc_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{</span><span class="nv"> </span><span class="s">vpc.vpc.id</span><span class="nv"> </span><span class="s">}&quot;</span><span class="w"></span>
<a id="__codelineno-15-49" name="__codelineno-15-49"></a><span class="w">        </span><span class="nt">tags</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-15-50" name="__codelineno-15-50"></a><span class="w">        </span><span class="nt">Name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demosubnet</span><span class="w"></span>
<a id="__codelineno-15-51" name="__codelineno-15-51"></a><span class="w">        </span><span class="nt">subnets</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-15-52" name="__codelineno-15-52"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;{</span><span class="nv"> </span><span class="s">subnet.subnet.id</span><span class="nv"> </span><span class="s">}&quot;</span><span class="w"></span>
<a id="__codelineno-15-53" name="__codelineno-15-53"></a><span class="w">        </span><span class="nt">routes</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-15-54" name="__codelineno-15-54"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0/0</span><span class="w"></span>
<a id="__codelineno-15-55" name="__codelineno-15-55"></a><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">gateway_id</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;{</span><span class="nv"> </span><span class="s">igw.gateway_id</span><span class="nv"> </span><span class="s">}&quot;</span><span class="w"></span>
<a id="__codelineno-15-56" name="__codelineno-15-56"></a><span class="w">    </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">route_table</span><span class="w"></span>
<a id="__codelineno-15-57" name="__codelineno-15-57"></a>
<a id="__codelineno-15-58" name="__codelineno-15-58"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create t2.small ec2 instance in subnet demosubnet</span><span class="w"></span>
<a id="__codelineno-15-59" name="__codelineno-15-59"></a><span class="w">    </span><span class="nt">amazon.aws.ec2_instance</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-15-60" name="__codelineno-15-60"></a><span class="w">        </span><span class="nt">key_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{</span><span class="nv"> </span><span class="s">_key_name_</span><span class="nv"> </span><span class="s">}&quot;</span><span class="w"></span>
<a id="__codelineno-15-61" name="__codelineno-15-61"></a><span class="w">        </span><span class="nt">instance_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">t2.small</span><span class="w"></span>
<a id="__codelineno-15-62" name="__codelineno-15-62"></a><span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{</span><span class="nv"> </span><span class="s">_image_</span><span class="nv"> </span><span class="s">}&quot;</span><span class="w"></span>
<a id="__codelineno-15-63" name="__codelineno-15-63"></a><span class="w">        </span><span class="nt">wait</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-15-64" name="__codelineno-15-64"></a><span class="w">        </span><span class="nt">vpc_subnet_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{</span><span class="nv"> </span><span class="s">subnet.subnet.id</span><span class="nv"> </span><span class="s">}&quot;</span><span class="w"></span>
<a id="__codelineno-15-65" name="__codelineno-15-65"></a><span class="w">        </span><span class="nt">security_group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demo</span><span class="w"></span>
<a id="__codelineno-15-66" name="__codelineno-15-66"></a><span class="w">    </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ec2</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title"><code>TIMEOUT</code> WARNING</p>
<p>It may take several moments for WCA to process and return code recommendations for a multi-task description as complex as this one. If you receive a time-out warning, try executing the code generation step by pressing <span class="keys"><kbd class="key-enter">Enter</kbd></span> a second time.</p>
</div>
</li>
</ol>
<hr />
<h1 id="_4"></h1>
<h1 id="next-steps">Next steps</h1>
<p>The following module will examine in detail WCA's post-processing and content source attribution capabilities.</p>




              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../setup/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Setup and Troubleshooting" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Setup and Troubleshooting
            </div>
          </div>
        </a>
      
      
        
        <a href="../source-matching-post-processing/" class="md-footer__link md-footer__link--next" aria-label="Next: Content Source Matching and Post-Processing" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Content Source Matching and Post-Processing
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 IBM
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "content.code.annotate"], "search": "../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>